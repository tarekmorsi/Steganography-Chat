webpackJsonp([1],{0:function(t,e){},"7adV":function(t,e){},"7zck":function(t,e){},EXDq:function(t,e,a){"use strict";var s={name:"test",data:function(){return{text:"lala"}},methods:{encryptTest:function(t){var e=new ImageMask({debug:!1,charSize:16,mixCount:2,lengthSize:24}),a=this.$refs.canvas,s=t,n=this.$refs.preview;return a.getContext("2d").drawImage(n,0,0,n.width,n.height),e.hideText(a,s),a.toDataURL()},decryptText:function(){var t=new ImageMask({debug:!1,charSize:16,mixCount:2,lengthSize:24}),e=this.$refs.canvas,a=t.revealText(e);console.log(a)}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("Steganography Chat")]),t._v(" "),a("div",[a("img",{ref:"preview",attrs:{src:"/static/desert.png"}}),t._v(" "),a("canvas",{ref:"canvas",staticStyle:{display:"none"}}),t._v(" "),a("img",{ref:"output"}),t._v(" "),a("a",{on:{click:t.encryptTest}},[t._v("Encrypt")]),t._v(" "),a("a",{on:{click:t.decryptText}},[t._v("Decrypt")])]),t._v(" "),a("br")])},staticRenderFns:[]};var r=a("VU/8")(s,n,!1,function(t){a("iYzn")},"data-v-146d5982",null);e.a=r.exports},FTWj:function(t,e,a){"use strict";var s=a("Xxa5"),n=a.n(s),r=a("exGp"),i=a.n(r),o=(a("NYxO"),a("SQ6o")),c=a("e7x4"),u=a.n(c),l={data:function(){return{user:o.a.user,handle:"",message:"",chatsAll:[]}},components:{},watch:{CHATS:function(){this.decryptAll(this.$store.getters.CHATS)}},computed:{CHATS:function(){var t=this;return i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.$store.getters.CHATS);case 1:case"end":return e.stop()}},e,t)}))()},HANDLE:function(){return this.$store.getters.HANDLE}},created:function(){o.a.checkAuth(),this.user.authenticated&&(this.handle=o.a.getUser().username)},mounted:function(){this.user.authenticated&&(this.$store.dispatch("SET_CHAT",o.a.getUser().username),this.$socket.emit("join",{username:o.a.getUser().username}))},updated:function(){var t=this.$refs.chatContainer;t.scrollTop=t.scrollHeight},sockets:{connect:function(){this.user.authentication&&this.$socket.emit("join",{username:o.a.getUser().username})},chat:function(t){this.$store.dispatch("ADD_CHAT",t)}},methods:{sendMessage:function(){var t=this;return i()(n.a.mark(function e(){var a,s,r,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.checkAuth();case 2:if(!t.user.authenticated){e.next=33;break}if(""===(a=t.$store.getters.HANDLE)&&(a=o.a.getUser().username),!t.message){e.next=31;break}if("@"!==t.message.charAt(0)){e.next=27;break}return s=t.message.replace(/ .*/,"").slice(1),e.next=10,o.a.checkIfUserExists(s);case 10:if(!e.sent){e.next=23;break}if(t.message=t.message.substr(t.message.indexOf(" ")+1),"@"===t.message.charAt(0)){e.next=20;break}return r={handle:a,receiver:s,message:t.encryptText(t.message)},e.next=17,t.$socket.emit("chatprivate",r);case 17:t.message="",e.next=21;break;case 20:u.a.fire({title:"Error!",text:"Please type your message",type:"error",confirmButtonText:"Close"});case 21:e.next=25;break;case 23:u.a.fire({title:"Error!",text:"User doesn't exist",type:"error",confirmButtonText:"Close"}),t.message="";case 25:e.next=31;break;case 27:return i={handle:a,message:t.encryptText(t.message)},e.next=30,t.$socket.emit("chat",i);case 30:t.message="";case 31:e.next=35;break;case 33:u.a.fire({title:"Error!",text:"Must Sign In To Chat",type:"error",confirmButtonText:"Close"}),t.message="";case 35:case"end":return e.stop()}},e,t)}))()},encryptText:function(t){var e=new ImageMask({debug:!1,charSize:16,mixCount:2,lengthSize:24}),a=this.$refs.canvas,s=t,n=this.$refs.preview;n.src="/static/desert.png";var r=a.getContext("2d");return r.clearRect(0,0,a.width,a.height),r.drawImage(n,0,0,n.width,n.height),e.hideText(a,s),a.toDataURL()},decryptText:function(t,e){var a=new ImageMask({debug:!1,charSize:16,mixCount:2,lengthSize:24}),s=this.$refs.canvas,n=this.$refs.preview;this.passImageToCanvas(a,s,t,function(t){n.src="/static/desert.png",e(t)})},passImageToCanvas:function(t,e,a,s){var r,o=e.getContext("2d"),c=new Image;c.onload=(r=i()(n.a.mark(function a(r){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o.drawImage(c,0,0),a.next=3,t.revealText(e);case 3:r=a.sent,s(r);case 5:case"end":return a.stop()}},a,this)})),function(t){return r.apply(this,arguments)}),c.src=a},decryptAll:function(t){var e;for(e in this.chatsAll=[],t){var a=this;this.decryptText(t[e].message,function(s){var n={handle:t[e].handle,receiver:t[e].receiver,message:s};a.chatsAll.push(n)})}},isMyHandle:function(t){return t===o.a.getUser().username},saveHandle:function(){this.$store.dispatch("SET_HANDLE",this.handle)}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.user.authenticated?a("div",[a("div",{staticClass:"chat_window"},[a("div",{staticClass:"top_menu"},[a("div",{staticClass:"buttons"},[a("div",{staticClass:"button close"}),t._v(" "),a("div",{staticClass:"button minimize"}),t._v(" "),a("div",{staticClass:"button maximize"})]),t._v(" "),a("div",{staticClass:"title"},[t._v("Chat")])]),t._v(" "),a("ul",{ref:"chatContainer",staticClass:"messages"},t._l(this.chatsAll,function(e){return a("div",[t.isMyHandle(e.handle)?a("li",{staticClass:"message right appeared"},[a("div",{staticClass:"avatar",staticStyle:{"padding-top":"22px"}},[t._v(t._s(e.handle))]),t._v(" "),a("div",{staticClass:"text_wrapper"},[a("div",{staticClass:"text"},["all"!=e.receiver?a("div",{staticStyle:{"font-size":"9px","font-weight":"900"}},[t._v("Private to "+t._s(e.receiver)+": ")]):t._e(),t._v(" "+t._s(e.message))])])]):a("li",{staticClass:"message left appeared"},[a("div",{staticClass:"avatar",staticStyle:{"padding-top":"22px"}},[t._v(t._s(e.handle))]),t._v(" "),a("div",{staticClass:"text_wrapper"},[a("div",{staticClass:"text"},["all"!=e.receiver?a("div",{staticStyle:{"font-size":"9px","font-weight":"900"}},[t._v(" Private to "+t._s(e.receiver)+": ")]):t._e(),t._v(t._s(e.message))])])])])}),0),t._v(" "),a("div",{staticClass:"bottom_wrapper clearfix"},[a("form",{staticStyle:{width:"100%"},on:{submit:function(e){return e.preventDefault(),t.sendMessage(e)}}},[a("div",{staticClass:"message_input_wrapper"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"message_input",attrs:{placeholder:"Type your message here...",required:""},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),t._v(" "),a("button",{attrs:{type:"submit"}},[a("div",{staticClass:"send_message"},[a("div",{staticClass:"icon"}),t._v(" "),a("div",{staticClass:"text"},[t._v("Send")])])])])])]),t._v(" "),a("div",{staticClass:"message_template"},[a("li",{staticClass:"message"},[a("div",{staticClass:"avatar"}),t._v(" "),a("div",{staticClass:"text_wrapper"},[a("div",{staticClass:"text"})])])])]):a("v-card",{staticClass:"pl-3 pr-3 pt-5 pb-5 mt-5"},[a("h3",{staticClass:"text-xs-center mb-3"},[t._v("Must sign in to access this chatroom.")]),t._v(" "),a("button",{attrs:{large:""}},[a("router-link",{attrs:{to:"/login"}},[t._v("Sign In")])],1)]),t._v(" "),a("img",{ref:"preview",attrs:{src:"/static/desert.png"}}),t._v(" "),a("canvas",{ref:"canvas",staticStyle:{display:"none"}})],1)},staticRenderFns:[]};var m=a("VU/8")(l,d,!1,function(t){a("gHJu")},null,null);e.a=m.exports},"JZ+M":function(t,e){},K31e:function(t,e,a){"use strict";var s=a("mvHQ"),n=a.n(s),r=a("qmV2"),i=a.n(r),o=a("SQ6o"),c=a("e7x4"),u=a.n(c),l={name:"login",data:function(){return{email:"",username:"",password:"",user:o.a.user,profile:"",type:"signin"}},beforeCreated:function(){},created:function(){o.a.checkAuth(),this.profile=o.a.getUser()},methods:{signup:function(){var t=this;this.$http.post(i.a.URL+"/user/",{email:this.email,username:this.username,password:this.password}).then(function(e){t.type="signin"}).catch(function(t){u.a.fire({title:"Error!",text:t.data.error,type:"error",confirmButtonText:"Close"})})},login:function(){var t=this;this.$http.post(i.a.URL+"/user/authenticate",{username:this.username,password:this.password}).then(function(e){var a={token:e.body.data.token,user:n()(e.body.data.user)};o.a.login(a),t.profile=o.a.getUser(),t.$store.dispatch("SET_HANDLE",t.username)}).catch(function(t){u.a.fire({title:"Error!",text:t.data.error,type:"error",confirmButtonText:"Close"})})},logout:function(){o.a.logout()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.user.authenticated?a("div",{attrs:{div:""}},[a("div",{staticStyle:{"padding-top":"3%"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12",staticStyle:{"border-radius":"16px"}},[a("div",{staticClass:"well profile col-lg-12 col-md-12 col-sm-12 col-xs-12"},[a("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"},[t._m(2),t._v(" "),a("h5",{staticStyle:{"text-align":"center"}},[a("strong",{attrs:{id:"user-name"}},[t._v(t._s(t.profile.username))])]),t._v(" "),a("p",{staticStyle:{"text-align":"center","font-size":"smaller","overflow-wrap":"break-word"},attrs:{id:"user-email"}},[t._v(t._s(t.profile.email)+" ")]),t._v(" "),t._m(3),t._v(" "),a("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12 divider text-center"})])])])])]),t._v(" "),a("a",{on:{click:function(e){return t.logout()}}},[a("div",{staticClass:"btn",staticStyle:{float:"inherit","margin-right":"16px"}},[t._v("Sign Out")])])]):a("div",["signin"==t.type?a("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[a("div",{staticClass:"box"},[a("div",[a("h1",[t._v("Sign In")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"email",attrs:{placeholder:"email",type:"text",name:"email",value:"email",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"email",attrs:{placeholder:"password",type:"password",name:"password",value:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),t._m(0),t._v(" "),a("a",{on:{click:function(e){t.type="signup"}}},[a("div",{attrs:{id:"btn2"}},[t._v("Sign Up")])])])])]):t._e(),t._v(" "),"signup"==t.type?a("form",{on:{submit:function(e){return e.preventDefault(),t.signup(e)}}},[a("div",{staticClass:"box"},[a("div",[a("h1",[t._v("Sign Up")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"email",attrs:{placeholder:"username",type:"username",name:"username",value:"username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"email",attrs:{placeholder:"email",type:"email",name:"email",value:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"email",attrs:{placeholder:"password",type:"password",name:"password",value:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),t._m(1),t._v(" "),a("a",{on:{click:function(e){t.type="signin"}}},[a("div",{attrs:{id:"btn2"}},[t._v("Sign In")])])])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticStyle:{display:"contents"},attrs:{type:"submit"}},[e("div",{staticClass:"btn"},[this._v("Sign In")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticStyle:{display:"contents"},attrs:{type:"submit"}},[e("div",{staticClass:"btn"},[this._v("Sign Up")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("figure",[e("img",{staticClass:"img-circle",staticStyle:{width:"75px"},attrs:{src:"https://static.thenounproject.com/png/363633-200.png",alt:"",id:"user-img"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{"text-align":"center","font-size":"smaller"}},[e("strong",[this._v("Status: ")]),e("span",{staticClass:"tags",attrs:{id:"user-status"}},[this._v("Active")])])}]};var m=a("VU/8")(l,d,!1,function(t){a("bb6j")},"data-v-288c8f66",null);e.a=m.exports},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),n=a("SQ6o"),r={name:"navbar",data:function(){return{user:n.a.user}},created:function(){n.a.checkAuth()}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"topnav",attrs:{id:"myTopnav"}},[e("a",[e("router-link",{attrs:{to:"/"}},[this._v("Home")])],1),this._v(" "),e("a",[e("router-link",{attrs:{to:"/chatroom"}},[this._v("Chatroom")])],1),this._v(" "),this.user.authenticated?e("a",[e("router-link",{attrs:{to:"/login"}},[this._v("Profile")])],1):e("a",[e("router-link",{attrs:{to:"/login"}},[this._v("Login")])],1)])])},staticRenderFns:[]};var o={name:"App",components:{navbar:a("VU/8")(r,i,!1,function(t){a("bCxo")},"data-v-70b983b6",null).exports}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("navbar"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var u=a("VU/8")(o,c,!1,function(t){a("JZ+M")},null,null).exports,l=a("YaEn"),d=a("qmV2"),m=a.n(d),v=a("8+8L"),p=a("3EgV"),h=a.n(p),f=(a("7zck"),a("HI0L")),g=a.n(f),_=a("Xxa5"),x=a.n(_),w=a("exGp"),C=a.n(w),y=a("NYxO"),S=a("mtWM"),b=a.n(S),k=this;s.default.use(y.a);var T,A=new y.a.Store({state:{chats:null,handle:""},getters:{CHATS:function(t){return t.chats},HANDLE:function(t){return t.handle}},mutations:{SET_CHAT:function(t,e){t.chats=e},ADD_CHAT:function(t,e){t.chats.push(e)},SET_HANDLE:function(t,e){t.handle=e}},actions:{SET_CHAT:(T=C()(x.a.mark(function t(e,a,s){var n,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get(m.a.URL+"/chat/"+a);case 2:n=t.sent,r=n.data,e.commit("SET_CHAT",r);case 5:case"end":return t.stop()}},t,k)})),function(t,e,a){return T.apply(this,arguments)}),ADD_CHAT:function(t,e){t.commit("ADD_CHAT",e)},SET_HANDLE:function(t,e){t.commit("SET_HANDLE",e)}}});s.default.use(h.a),s.default.use(v.a),s.default.use(new g.a({debug:!1,connection:m.a.URL})),s.default.config.productionTip=!1,new s.default({el:"#app",router:l.a,store:A,components:{App:u},template:"<App/>"})},SQ6o:function(t,e,a){"use strict";var s=a("Xxa5"),n=a.n(s),r=a("exGp"),i=a.n(r),o=a("qmV2"),c=a.n(o),u=a("mtWM"),l=a.n(u);e.a={user:{authenticated:!1},login:function(t){localStorage.setItem("token",t.token),localStorage.setItem("user",t.user),this.user.authenticated=!0},logout:function(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.user.authenticated=!1},checkAuth:function(){var t=localStorage.getItem("token");this.user.authenticated=!!t},getAuthHeader:function(){return{"jwt-token":localStorage.getItem("token")}},getUser:function(){return JSON.parse(localStorage.getItem("user"))},checkIfUserExists:function(t){var e=this;return i()(n.a.mark(function a(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get(c.a.URL+"/user/checkIfUserExists/"+t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},a,e)}))()}}},YaEn:function(t,e,a){"use strict";(function(t){var s=a("7+uW"),n=a("/ocq"),r=a("wUZA"),i=a("K31e"),o=a("FTWj"),c=a("EXDq");s.default.use(n.a),e.a=new n.a({mode:"history",base:t,routes:[{path:"/",name:"home",component:r.a},{path:"/login",name:"login",component:i.a},{path:"/chatroom",name:"chatroom",component:o.a},{path:"/test",name:"test",component:c.a}]})}).call(e,"/")},bCxo:function(t,e){},bb6j:function(t,e){},gHJu:function(t,e){},iYzn:function(t,e){},qmV2:function(t,e){t.exports={URL:""}},wUZA:function(t,e,a){"use strict";var s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",[this._v("Steganography Chat")]),this._v(" "),e("p",{staticStyle:{width:"36%",margin:"auto"}},[this._v("\n    Steganography is simply the art of hiding data within data. For example, you could hide\n    some text within the pixels of an image, within the pixels of a given frame of a video.\n    In this project, we implement a decentralized P2P chat application which applies steganographic\n    techniques to relay secret messages back and forth between multiple users.\n  ")]),this._v(" "),e("br"),this._v(" "),e("div",{staticClass:"blue-square-container"},[e("div",{staticClass:"blue-square"},[e("img",{staticStyle:{"max-width":"100%"},attrs:{src:"https://media.giphy.com/media/26FPJGjhefSJuaRhu/giphy.gif"}})])])])}]};var n=a("VU/8")({name:"home",data:function(){return{}}},s,!1,function(t){a("7adV")},"data-v-6c0cc884",null);e.a=n.exports}},["NHnr"]);
//# sourceMappingURL=app.6828787f6e745a44fb6e.js.map